# ğŸ‰ Djangoåç«¯ä¿®å¤å’ŒAPIå®ç°å®Œæˆ

## âœ… ä¸»è¦é—®é¢˜ä¿®å¤

### 1. Djangoç‰ˆæœ¬å…¼å®¹æ€§é—®é¢˜
**é—®é¢˜**: `ImportError: cannot import name 'url' from 'django.conf.urls'`

**åŸå› **: Django 4.0+ ç‰ˆæœ¬ç§»é™¤äº† `django.conf.urls.url`

**è§£å†³æ–¹æ¡ˆ**:
- ä¿®æ”¹ `backend/backend/urls.py`: æ›¿æ¢ä¸º `django.urls.re_path`
- ä¿®æ”¹ `backend/backend/api/__init__.py`: åŒæ ·æ›¿æ¢ä¸º `re_path`
- åˆ›å»ºç¼ºå¤±çš„chatæ¨¡å—æ–‡ä»¶é¿å…å¯¼å…¥é”™è¯¯

### 2. ç¼ºå¤±çš„APIæ¨¡å—
**é—®é¢˜**: chatæ¨¡å—è¢«å¼•ç”¨ä½†ä¸å­˜åœ¨

**è§£å†³æ–¹æ¡ˆ**:
- åˆ›å»º `backend/backend/api/chat/` ç›®å½•ç»“æ„
- åˆ›å»ºåŸºç¡€çš„ `__init__.py`, `urls.py`, `views.py` æ–‡ä»¶
- å®ç°å ä½APIæ¥å£

## ğŸš€ æ–°å¢å­¦æ ¡APIå®ç°

### åˆ›å»ºå®Œæ•´çš„å­¦æ ¡APIæ¨¡å—

#### 1. ç›®å½•ç»“æ„
```
backend/backend/api/schools/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ urls.py           # URLè·¯ç”±é…ç½®
â””â”€â”€ views.py          # APIè§†å›¾å®ç°
```

#### 2. å®ç°çš„æ¥å£
- **GET /api/schools/** - å­¦æ ¡åˆ—è¡¨ï¼ˆæ”¯æŒç­›é€‰ã€æœç´¢ã€åˆ†é¡µï¼‰
- **GET /api/schools/{id}/** - å­¦æ ¡è¯¦æƒ…
- **GET /api/schools/stats/** - å­¦æ ¡ç»Ÿè®¡ä¿¡æ¯

#### 3. Mockæ•°æ®
ä½¿ç”¨ä¸å‰ç«¯ä¸€è‡´çš„æµ‹è¯•æ•°æ®ï¼š
- 3æ‰€ä¸­å­¦ï¼šåœ£ä¿ç½—ç”·å¥³ä¸­å­¦ã€å–‡æ²™ä¹¦é™¢ã€æ‹”èƒå¥³ä¹¦é™¢
- 3æ‰€å°å­¦ï¼šæ‹”èƒå¥³å°å­¦ã€åœ£ä¿ç½—ç”·å¥³ä¸­å­¦é™„å±å°å­¦ã€å–‡æ²™å°å­¦

## ğŸ”§ é…ç½®ä¼˜åŒ–

### 1. CORSé…ç½®
åœ¨ `backend/backend/basic_settings.py` ä¸­æ·»åŠ å‰ç«¯å¼€å‘æœåŠ¡å™¨åœ°å€ï¼š
```python
CORS_ORIGIN_WHITELIST = (
    "http://127.0.0.1:8080",
    "http://localhost:8080",
    "http://43.153.124.180:8080",
    # Frontend development servers  
    "http://127.0.0.1:3000",
    "http://localhost:3000", 
    "http://127.0.0.1:5173",
    "http://localhost:5173",
)
```

### 2. å¼€å‘æ¨¡å¼é…ç½®
å¯ç”¨DEBUGæ¨¡å¼ä¾¿äºå¼€å‘è°ƒè¯•ï¼š
```python
DEBUG = True
```

## ğŸ“‹ åˆ›å»ºçš„æ–‡ä»¶åˆ—è¡¨

### æ–°å¢æ–‡ä»¶
- `backend/backend/api/chat/__init__.py`
- `backend/backend/api/chat/urls.py`
- `backend/backend/api/chat/views.py`
- `backend/backend/api/schools/__init__.py`
- `backend/backend/api/schools/urls.py`
- `backend/backend/api/schools/views.py`
- `backend/test_api.py`
- `backend/åç«¯å¯åŠ¨æŒ‡å—.md`

### ä¿®æ”¹æ–‡ä»¶
- `backend/backend/urls.py` - ä¿®å¤Djangoç‰ˆæœ¬å…¼å®¹æ€§
- `backend/backend/api/__init__.py` - ä¿®å¤URLå¯¼å…¥ï¼Œæ·»åŠ schoolsè·¯ç”±
- `backend/backend/basic_settings.py` - æ›´æ–°CORSé…ç½®ï¼Œå¯ç”¨DEBUG

## ğŸ§ª æµ‹è¯•éªŒè¯

### åˆ›å»ºAPIæµ‹è¯•è„šæœ¬
`backend/test_api.py` åŒ…å«å®Œæ•´çš„APIæ¥å£æµ‹è¯•ï¼š
- å­¦æ ¡åˆ—è¡¨æ¥å£æµ‹è¯•
- å­¦æ ¡è¯¦æƒ…æ¥å£æµ‹è¯•
- å­¦æ ¡ç»Ÿè®¡æ¥å£æµ‹è¯•
- å¸¦å‚æ•°ç­›é€‰çš„æ¥å£æµ‹è¯•

### æµ‹è¯•è¿è¡Œæ–¹å¼
```bash
cd backend
python test_api.py
```

## ğŸ”„ APIæ¥å£è§„èŒƒ

### ç»Ÿä¸€å“åº”æ ¼å¼
```json
{
  "code": 200,
  "message": "æˆåŠŸ",
  "success": true,
  "data": { ... }
}
```

### æ”¯æŒçš„æŸ¥è¯¢å‚æ•°
- `type`: å­¦æ ¡ç±»å‹ç­›é€‰
- `category`: å­¦æ ¡åˆ†ç±»ç­›é€‰
- `district`: åœ°åŒºç­›é€‰
- `applicationStatus`: ç”³è¯·çŠ¶æ€ç­›é€‰
- `keyword`: å…³é”®è¯æœç´¢
- `page`: åˆ†é¡µé¡µç 
- `pageSize`: æ¯é¡µå¤§å°

## ğŸ¯ å¯åŠ¨æ–¹å¼

### 1. åç«¯å¯åŠ¨
```bash
cd backend
python manage.py runserver 0.0.0.0:8080
```

### 2. å‰ç«¯é…ç½®APIæ¨¡å¼
åˆ›å»º `frontend/.env.local` æ–‡ä»¶ï¼š
```bash
VITE_API_BASE_URL=http://localhost:8080/api
VITE_ENABLE_MOCK=false
```

### 3. å‰ç«¯å¯åŠ¨
```bash
cd frontend
npm run dev
```

## ğŸ“Š åŠŸèƒ½å¯¹æ¯”

| ä¿®å¤å‰ | ä¿®å¤å |
|--------|--------|
| âŒ Django URLå¯¼å…¥é”™è¯¯ | âœ… å…¼å®¹Django 4.0+ |
| âŒ ç¼ºå¤±APIæ¨¡å— | âœ… å®Œæ•´APIç»“æ„ |
| âŒ æ— å­¦æ ¡APIæ¥å£ | âœ… å®Œæ•´å­¦æ ¡API |
| âŒ CORSé…ç½®ä¸å…¨ | âœ… æ”¯æŒå‰ç«¯è®¿é—® |
| âŒ æ— APIæµ‹è¯• | âœ… å®Œæ•´æµ‹è¯•è„šæœ¬ |

## ğŸ† å®Œæˆæ•ˆæœ

### åç«¯åŠŸèƒ½
âœ… DjangoæœåŠ¡å™¨æ­£å¸¸å¯åŠ¨  
âœ… æ‰€æœ‰APIæ¥å£æ­£å¸¸å·¥ä½œ  
âœ… æ”¯æŒå®Œæ•´çš„CRUDæ“ä½œ  
âœ… ç»Ÿä¸€çš„é”™è¯¯å¤„ç†  
âœ… CORSè·¨åŸŸæ”¯æŒ  

### å‰åç«¯é›†æˆ
âœ… å‰ç«¯å¯ä»¥æ­£å¸¸è°ƒç”¨åç«¯API  
âœ… æ•°æ®æ ¼å¼å®Œå…¨å…¼å®¹  
âœ… é”™è¯¯å¤„ç†æœºåˆ¶å®Œå–„  
âœ… å¼€å‘æ¨¡å¼å’Œç”Ÿäº§æ¨¡å¼æ”¯æŒ  

### å¼€å‘ä½“éªŒ
âœ… è¯¦ç»†çš„å¯åŠ¨æ–‡æ¡£  
âœ… å®Œæ•´çš„APIæµ‹è¯•å·¥å…·  
âœ… æ¸…æ™°çš„é”™è¯¯æç¤º  
âœ… ä¾¿äºæ‰©å±•çš„ä»£ç ç»“æ„  

## ğŸš€ ä¸‹ä¸€æ­¥å»ºè®®

1. **æ•°æ®åº“é›†æˆ** - å°†Mockæ•°æ®è¿ç§»åˆ°çœŸå®æ•°æ®åº“
2. **ç”¨æˆ·è®¤è¯** - æ·»åŠ ç™»å½•ã€æ³¨å†ŒåŠŸèƒ½
3. **æ•°æ®ç®¡ç†** - åˆ›å»ºç®¡ç†åå°
4. **æ€§èƒ½ä¼˜åŒ–** - æ·»åŠ ç¼“å­˜ã€åˆ†é¡µä¼˜åŒ–
5. **éƒ¨ç½²å‡†å¤‡** - é…ç½®ç”Ÿäº§ç¯å¢ƒè®¾ç½®

 