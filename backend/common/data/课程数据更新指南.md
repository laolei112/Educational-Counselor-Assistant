# 课程数据更新快速指南

## 快速开始

### 步骤1：运行数据处理脚本

```bash
cd /Users/roylei/projects/Educational-Counselor-Assistant/backend
python common/data/update_school_curriculum.py
```

或在 Docker 容器中运行：

```bash
docker exec -it <backend-container> python common/data/update_school_curriculum.py
```

### 步骤2：重启后端服务

```bash
docker-compose restart backend
```

### 步骤3：查看效果

1. 打开前端页面
2. 点击任一中学
3. 查看"中四至中六课程设置（DSE）"表格

## 数据格式

### Excel 列名
- `以中文为教学语言_中四至中六`
- `以英文为教学语言_中四至中六`

### 数据库格式
```json
{
  "中文授课": ["中国语文", "中史", "公民与社会发展科"],
  "英文授课": ["英国语文", "数学", "物理", "化学", "生物"]
}
```

### 前端展示
表格形式，两行分别显示中文授课和英文授课的科目列表。

## 注意事项

1. ✅ 脚本会自动忽略 `<br>` 后的非 DSE 课程
2. ✅ 使用 `、` 分隔科目
3. ✅ 空数据不会更新
4. ✅ 脚本可重复运行

## 验证

脚本运行后会自动显示：
- 更新成功的学校数量
- 未找到的学校数量
- 无课程数据的学校数量
- 前5条数据的验证结果

## 问题排查

### 问题：脚本找不到 Excel 文件
**解决**：确保 `香港各中学信息.xlsx` 在 `common/data/` 目录下

### 问题：数据库连接失败
**解决**：检查 Django 配置和数据库连接

### 问题：前端不显示表格
**解决**：
1. 检查浏览器控制台错误
2. 确认后端 API 返回的数据格式
3. 确认学校类型为 'secondary'

