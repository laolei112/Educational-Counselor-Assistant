# ğŸš€ åç«¯APIå¯åŠ¨æŒ‡å—

## âœ… é—®é¢˜ä¿®å¤æ€»ç»“

å·²ä¿®å¤Djangoç‰ˆæœ¬å…¼å®¹æ€§é—®é¢˜ï¼š
- å°† `django.conf.urls.url` æ›¿æ¢ä¸º `django.urls.re_path`
- åˆ›å»ºå®Œæ•´çš„å­¦æ ¡APIæ¥å£
- é…ç½®CORSæ”¯æŒå‰ç«¯è®¿é—®
- å¯ç”¨DEBUGæ¨¡å¼ä¾¿äºå¼€å‘

## ğŸ› ï¸ ç¯å¢ƒè¦æ±‚

- Python 3.8+
- Django 4.0+ï¼ˆå·²å…¼å®¹ï¼‰
- MySQLæ•°æ®åº“
- Redisç¼“å­˜

## ğŸ“‹ å¯åŠ¨æ­¥éª¤

### 1. å®‰è£…ä¾èµ–
```bash
cd backend
pip install -r requirements.txt
```

### 2. é…ç½®æ•°æ®åº“
ç¡®ä¿ `config/conf/dev/backend/settings.json` ä¸­çš„æ•°æ®åº“é…ç½®æ­£ç¡®ï¼š
```json
{
  "mysql": {
    "host": "localhost",
    "port": 3306,
    "user": "your_username",
    "password": "your_password",
    "db": "your_database"
  },
  "redis": {
    "host": "localhost",
    "port": 6379,
    "db": 0,
    "password": ""
  }
}
```

### 3. æ•°æ®åº“è¿ç§»
```bash
python manage.py makemigrations
python manage.py migrate
```

### 4. å¯åŠ¨æœåŠ¡å™¨
```bash
python manage.py runserver 0.0.0.0:8080
```

## ğŸ”— APIæ¥å£

### å·²å®ç°çš„å­¦æ ¡APIæ¥å£ï¼š

#### 1. è·å–å­¦æ ¡åˆ—è¡¨
```
GET /api/schools/
```
**å‚æ•°**ï¼š
- `type`: å­¦æ ¡ç±»å‹ (primary/secondary)
- `category`: å­¦æ ¡åˆ†ç±» (elite/traditional/direct/government)
- `district`: åœ°åŒº
- `applicationStatus`: ç”³è¯·çŠ¶æ€ (open/closed/deadline)
- `keyword`: æœç´¢å…³é”®è¯
- `page`: é¡µç  (é»˜è®¤1)
- `pageSize`: æ¯é¡µå¤§å° (é»˜è®¤20)

#### 2. è·å–å­¦æ ¡è¯¦æƒ…
```
GET /api/schools/{id}/
```

#### 3. è·å–å­¦æ ¡ç»Ÿè®¡
```
GET /api/schools/stats/
```
**å‚æ•°**ï¼š
- `type`: å­¦æ ¡ç±»å‹ (å¯é€‰)

### å“åº”æ ¼å¼
æ‰€æœ‰æ¥å£è¿”å›ç»Ÿä¸€æ ¼å¼ï¼š
```json
{
  "code": 200,
  "message": "æˆåŠŸ",
  "success": true,
  "data": { ... }
}
```

## ğŸ§ª æµ‹è¯•API

### ä½¿ç”¨æµ‹è¯•è„šæœ¬
```bash
cd backend
python test_api.py
```

### æ‰‹åŠ¨æµ‹è¯•
```bash
# è·å–æ‰€æœ‰å­¦æ ¡
curl "http://localhost:8080/api/schools/"

# è·å–ä¸­å­¦åˆ—è¡¨
curl "http://localhost:8080/api/schools/?type=secondary"

# è·å–å­¦æ ¡è¯¦æƒ…
curl "http://localhost:8080/api/schools/1/"

# è·å–ç»Ÿè®¡ä¿¡æ¯
curl "http://localhost:8080/api/schools/stats/"
```

## ğŸ”§ CORSé…ç½®

å·²é…ç½®å…è®¸å‰ç«¯è®¿é—®çš„åœ°å€ï¼š
- `http://localhost:3000` (Reacté»˜è®¤ç«¯å£)
- `http://localhost:5173` (Viteé»˜è®¤ç«¯å£)
- `http://127.0.0.1:3000`
- `http://127.0.0.1:5173`

## ğŸ“Š Mockæ•°æ®

å½“å‰ä½¿ç”¨ä¸å‰ç«¯ä¸€è‡´çš„Mockæ•°æ®ï¼š
- **ä¸­å­¦**: åœ£ä¿ç½—ç”·å¥³ä¸­å­¦ã€å–‡æ²™ä¹¦é™¢ã€æ‹”èƒå¥³ä¹¦é™¢
- **å°å­¦**: æ‹”èƒå¥³å°å­¦ã€åœ£ä¿ç½—ç”·å¥³ä¸­å­¦é™„å±å°å­¦ã€å–‡æ²™å°å­¦

## ğŸ”„ å‰åç«¯è”è°ƒ

### 1. å¯åŠ¨åç«¯æœåŠ¡
```bash
cd backend
python manage.py runserver 0.0.0.0:8080
```

### 2. é…ç½®å‰ç«¯è¿æ¥API
åœ¨å‰ç«¯é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.env.local` æ–‡ä»¶ï¼š
```bash
VITE_API_BASE_URL=http://localhost:8080/api
VITE_ENABLE_MOCK=false
```

### 3. å¯åŠ¨å‰ç«¯
```bash
cd frontend
npm run dev
```

### 4. éªŒè¯è¿æ¥
- å‰ç«¯åº”è¯¥ä¸å†æ˜¾ç¤º"Mockæ¨¡å¼"æŒ‡ç¤ºå™¨
- æ•°æ®æ¥æºäºåç«¯API
- ç½‘ç»œé¢æ¿å¯ä»¥çœ‹åˆ°APIè¯·æ±‚

## âš ï¸ å¸¸è§é—®é¢˜

### é—®é¢˜1: ImportError django.conf.urls url
**è§£å†³**: å·²ä¿®å¤ï¼Œä½¿ç”¨ `django.urls.re_path` æ›¿ä»£

### é—®é¢˜2: CORSé”™è¯¯
**è§£å†³**: å·²é…ç½®CORSï¼Œç¡®ä¿å‰ç«¯åœ°å€åœ¨ç™½åå•ä¸­

### é—®é¢˜3: æ•°æ®åº“è¿æ¥é”™è¯¯
**è§£å†³**: æ£€æŸ¥ `config/conf/dev/backend/settings.json` é…ç½®

### é—®é¢˜4: Redisè¿æ¥é”™è¯¯
**è§£å†³**: ç¡®ä¿RedisæœåŠ¡è¿è¡Œï¼Œæˆ–ä¸´æ—¶ç¦ç”¨ç¼“å­˜

## ğŸ“ˆ ä¸‹ä¸€æ­¥æ‰©å±•

- è¿æ¥çœŸå®æ•°æ®åº“
- æ·»åŠ ç”¨æˆ·è®¤è¯
- å®ç°æ•°æ®ç®¡ç†åå°
- æ·»åŠ æ—¥å¿—å’Œç›‘æ§
- éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ

## ğŸ¯ æˆåŠŸæ ‡è¯†

å½“çœ‹åˆ°ä»¥ä¸‹ä¿¡æ¯è¡¨ç¤ºå¯åŠ¨æˆåŠŸï¼š
```
System check identified no issues (0 silenced).
Django version 4.x.x, using settings 'backend.settings'
Starting development server at http://0.0.0.0:8080/
Quit the server with CONTROL-C.
```

è®¿é—® `http://localhost:8080/api/schools/` åº”è¯¥è¿”å›JSONæ ¼å¼çš„å­¦æ ¡æ•°æ®ã€‚ 