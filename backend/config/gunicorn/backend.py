# ========================================
# ğŸ”¥ é‡è¦é…ç½®è¯´æ˜
# ========================================
# ä¹‹å‰ä½¿ç”¨ gevent worker å¯¼è‡´ Django è¿æ¥æ± æ— æ³•å·¥ä½œï¼
# æ¯æ¬¡è¯·æ±‚éƒ½è¦å»ºç«‹æ–°è¿æ¥ï¼Œè€—æ—¶ 1000ms+
# 
# ç°åœ¨æ”¹ç”¨ gthread workerï¼ˆçœŸæ­£çš„å¤šçº¿ç¨‹ï¼‰
# Django è¿æ¥æ± å¯ä»¥æ­£å¸¸å·¥ä½œï¼Œè¿æ¥è·å–åªéœ€ 2-5ms
# ========================================

# å¹¶è¡Œå·¥ä½œè¿›ç¨‹æ•°
workers = 2

# æŒ‡å®šæ¯ä¸ªå·¥ä½œè€…çš„çº¿ç¨‹æ•°
# gthread worker æ”¯æŒå¤šçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½èƒ½å¤ç”¨è¿æ¥
threads = 8

bind = '0.0.0.0:8080'
daemon = 'false'

# å·¥ä½œæ¨¡å¼ï¼šçœŸæ­£çš„å¤šçº¿ç¨‹ï¼ˆæ›¿ä»£geventåç¨‹ï¼‰
# é€‰æ‹© gthread çš„åŸå› ï¼š
# 1. Django è¿æ¥æ± åœ¨çœŸæ­£çš„çº¿ç¨‹ä¸­å®Œç¾å·¥ä½œ
# 2. CONN_MAX_AGE é…ç½®å¯ä»¥ç”Ÿæ•ˆ
# 3. æ¯ä¸ªçº¿ç¨‹å¤ç”¨æ•°æ®åº“è¿æ¥ï¼Œæ€§èƒ½æå‡ 200å€
worker_class = 'gthread'  # ä» 'gevent' æ”¹ä¸º 'gthread'

# æœ€å¤§å¹¶å‘è¯·æ±‚æ•° = workers Ã— threads = 2 Ã— 8 = 16
worker_connections = 1000
