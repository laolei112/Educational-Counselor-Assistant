# ðŸŒŸ é¦™æ¸¯å‡å­¦åŠ©æ‰‹ - å…¨æ ˆ Docker éƒ¨ç½²æŒ‡å—

## ðŸ—ï¸ é¡¹ç›®æž¶æž„

æœ¬é¡¹ç›®é‡‡ç”¨çŽ°ä»£åŒ–çš„**å‰åŽç«¯åˆ†ç¦»**æž¶æž„ï¼Œä½¿ç”¨ Docker Compose è¿›è¡Œå®¹å™¨åŒ–éƒ¨ç½²ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ç”¨æˆ·è®¿é—®                            â”‚
â”‚                http://localhost                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             Nginx åå‘ä»£ç† (80)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚      /      â”‚   /api/     â”‚     /swagger/       â”‚ â”‚
â”‚  â”‚   å‰ç«¯è·¯ç”±   â”‚  åŽç«¯ API   â”‚    API æ–‡æ¡£         â”‚ â”‚
â””â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”˜
   â”‚             â”‚             â”‚                     â”‚
â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”
â”‚  Frontend   â”‚ â”‚             Backend                 â”‚
â”‚  Vue 3 SPA  â”‚ â”‚        Django + DRF                â”‚
â”‚  (é™æ€æ–‡ä»¶)  â”‚ â”‚         (8080)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”˜
                  â”‚                                 â”‚
              â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”
              â”‚  MySQL  â”‚                    â”‚  Redis  â”‚
              â”‚ (3306)  â”‚                    â”‚ (6380)  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ðŸ› ï¸ æŠ€æœ¯æ ˆ

### å‰ç«¯ (Frontend)
- **æ¡†æž¶**: Vue 3 + Composition API
- **æž„å»ºå·¥å…·**: Vite
- **è¯­è¨€**: TypeScript
- **çŠ¶æ€ç®¡ç†**: Pinia
- **è·¯ç”±**: Vue Router 4
- **éƒ¨ç½²**: Nginx é™æ€æ–‡ä»¶æœåŠ¡

### åŽç«¯ (Backend)
- **æ¡†æž¶**: Django + Django REST Framework
- **è¯­è¨€**: Python 3.9
- **æ•°æ®åº“**: MySQL 8.0
- **ç¼“å­˜**: Redis 7
- **API æ–‡æ¡£**: Swagger (drf_yasg)
- **è·¨åŸŸ**: django-cors-headers

### åŸºç¡€è®¾æ–½ (Infrastructure)
- **åå‘ä»£ç†**: Nginx
- **å®¹å™¨åŒ–**: Docker + Docker Compose
- **æ•°æ®æŒä¹…åŒ–**: Docker Volumes

## ðŸš€ å¿«é€Ÿå¼€å§‹

### 1. å‰ç½®è¦æ±‚
```bash
# æ£€æŸ¥ Docker ç‰ˆæœ¬
docker --version
docker-compose --version

# æœ€ä½Žè¦æ±‚
# Docker: 20.0+
# Docker Compose: 1.29+
```

### 2. ä¸€é”®å¯åŠ¨

**Windows ç”¨æˆ·**ï¼š
```cmd
start-full-stack.bat
```

**Linux/Mac ç”¨æˆ·**ï¼š
```bash
chmod +x start-docker.sh
./start-docker.sh
```

**æ‰‹åŠ¨å¯åŠ¨**ï¼š
```bash
# æž„å»ºå¹¶å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d --build

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f
```

### 3. éªŒè¯éƒ¨ç½²

ç­‰å¾… 15-30 ç§’æœåŠ¡å®Œå…¨å¯åŠ¨åŽï¼š

```bash
# æ£€æŸ¥å‰ç«¯
curl http://localhost

# æ£€æŸ¥åŽç«¯ API
curl http://localhost/api/schools/

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
docker-compose ps
```

## ðŸŒ è®¿é—®åœ°å€

| æœåŠ¡ | åœ°å€ | è¯´æ˜Ž |
|------|------|------|
| **å‰ç«¯åº”ç”¨** | http://localhost | Vue 3 å•é¡µåº”ç”¨ |
| **åŽç«¯ API** | http://localhost/api/ | Django REST API |
| **API æ–‡æ¡£** | http://localhost/swagger/ | Swagger UI æŽ¥å£æ–‡æ¡£ |
| **Nginx å¥åº·æ£€æŸ¥** | http://localhost/nginx-health | åå‘ä»£ç†çŠ¶æ€ |
| **MySQL** | localhost:3306 | æ•°æ®åº“è¿žæŽ¥ |
| **Redis** | localhost:6380 | ç¼“å­˜è¿žæŽ¥ |

## ðŸ“‹ å®¹å™¨æœåŠ¡

| å®¹å™¨å | é•œåƒ | ç«¯å£æ˜ å°„ | èŒè´£ |
|--------|------|----------|------|
| `edu_nginx` | nginx:alpine | 80:80 | åå‘ä»£ç†ã€é™æ€æ–‡ä»¶æœåŠ¡ |
| `edu_frontend` | è‡ªæž„å»º | - | Vue 3 å‰ç«¯åº”ç”¨ |
| `edu_backend` | è‡ªæž„å»º | - | Django åŽç«¯ API |
| `edu_mysql` | mysql:8.0 | 3306:3306 | æ•°æ®åº“ |
| `edu_redis` | redis:7-alpine | 6380:6380 | ç¼“å­˜ |

## ðŸ”§ å¼€å‘è°ƒè¯•

### æŸ¥çœ‹æ—¥å¿—
```bash
# æŸ¥çœ‹æ‰€æœ‰æœåŠ¡æ—¥å¿—
docker-compose logs

# æŸ¥çœ‹ç‰¹å®šæœåŠ¡å®žæ—¶æ—¥å¿—
docker-compose logs -f frontend
docker-compose logs -f backend
docker-compose logs -f nginx

# æŸ¥çœ‹æœ€è¿‘ 50 è¡Œæ—¥å¿—
docker-compose logs --tail=50 backend
```

### è¿›å…¥å®¹å™¨è°ƒè¯•
```bash
# è¿›å…¥å‰ç«¯å®¹å™¨
docker-compose exec frontend sh

# è¿›å…¥åŽç«¯å®¹å™¨
docker-compose exec backend bash

# è¿›å…¥æ•°æ®åº“
docker-compose exec mysql mysql -u root -p

# è¿›å…¥ Redis
docker-compose exec redis redis-cli -p 6380 -a HaWSD*9265tZYj
```

### é‡æ–°æž„å»ºæœåŠ¡
```bash
# é‡æ–°æž„å»ºå•ä¸ªæœåŠ¡
docker-compose build frontend
docker-compose build backend

# é‡æ–°æž„å»ºå¹¶å¯åŠ¨
docker-compose up -d --build frontend
```

## ðŸ§ª æµ‹è¯•éªŒè¯

### API æŽ¥å£æµ‹è¯•
```bash
# èŽ·å–å­¦æ ¡åˆ—è¡¨
curl "http://localhost/api/schools/"

# èŽ·å–å­¦æ ¡è¯¦æƒ…
curl "http://localhost/api/schools/1/"

# èŽ·å–ç»Ÿè®¡ä¿¡æ¯
curl "http://localhost/api/schools/stats/"

# æŒ‰ç±»åž‹ç­›é€‰
curl "http://localhost/api/schools/?type=secondary"
```

### å‰ç«¯åŠŸèƒ½æµ‹è¯•
```bash
# è®¿é—®ä¸»é¡µ
open http://localhost

# æ£€æŸ¥å‰ç«¯è·¯ç”±
open http://localhost/schools
open http://localhost/about
```

## ðŸ›‘ åœæ­¢å’Œæ¸…ç†

```bash
# åœæ­¢æ‰€æœ‰æœåŠ¡
docker-compose down

# åœæ­¢å¹¶åˆ é™¤æ•°æ®å·ï¼ˆâš ï¸ ä¼šä¸¢å¤±æ•°æ®ï¼‰
docker-compose down -v

# æ¸…ç† Docker ç¼“å­˜
docker system prune -f
```

## ðŸ” æ•…éšœæŽ’é™¤

### 1. ç«¯å£å†²çª
```bash
# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tulpn | grep :80
netstat -tulpn | grep :3306

# ä¿®æ”¹ç«¯å£æ˜ å°„
# ç¼–è¾‘ docker-compose.yml ä¸­çš„ ports é…ç½®
```

### 2. å®¹å™¨å¯åŠ¨å¤±è´¥
```bash
# æŸ¥çœ‹è¯¦ç»†é”™è¯¯
docker-compose logs [service_name]

# æ£€æŸ¥å®¹å™¨çŠ¶æ€
docker-compose ps

# é‡æ–°æž„å»ºé—®é¢˜å®¹å™¨
docker-compose build --no-cache [service_name]
```

### 3. æ•°æ®åº“è¿žæŽ¥é—®é¢˜
```bash
# æ£€æŸ¥ MySQL æ˜¯å¦å°±ç»ª
docker-compose exec mysql mysql -u root -p -e "SELECT 1;"

# æ£€æŸ¥ Django æ•°æ®åº“é…ç½®
docker-compose exec backend python manage.py check --database default
```

### 4. å‰ç«¯æž„å»ºå¤±è´¥
```bash
# æŸ¥çœ‹å‰ç«¯æž„å»ºæ—¥å¿—
docker-compose logs frontend

# æ‰‹åŠ¨æž„å»ºæµ‹è¯•
cd frontend
npm install
npm run build
```

## ðŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### ç”Ÿäº§çŽ¯å¢ƒå»ºè®®
1. **å¯ç”¨ HTTPS**
2. **é…ç½® CDN**
3. **ä¼˜åŒ– Nginx ç¼“å­˜**
4. **å¯ç”¨ gzip åŽ‹ç¼©**
5. **è®¾ç½®åˆé€‚çš„å®‰å…¨å¤´**

### æ‰©å±•é…ç½®
```bash
# æ°´å¹³æ‰©å±•åŽç«¯
docker-compose up -d --scale backend=3

# ä½¿ç”¨å¤–éƒ¨æ•°æ®åº“
# ä¿®æ”¹ docker-compose.yml ä¸­çš„æ•°æ®åº“é…ç½®
```

## ðŸ” å®‰å…¨è€ƒè™‘

âš ï¸ **å½“å‰é…ç½®ä»…é€‚ç”¨äºŽå¼€å‘çŽ¯å¢ƒ**

ç”Ÿäº§çŽ¯å¢ƒè¯·åŠ¡å¿…ï¼š
- ä¿®æ”¹æ‰€æœ‰é»˜è®¤å¯†ç 
- å¯ç”¨ HTTPS
- é…ç½®é˜²ç«å¢™
- ä½¿ç”¨çŽ¯å¢ƒå˜é‡ç®¡ç†æ•æ„Ÿä¿¡æ¯
- å®šæœŸæ›´æ–° Docker é•œåƒ

## ðŸ“ž æ”¯æŒ

å¦‚æžœé‡åˆ°é—®é¢˜ï¼š
1. æŸ¥çœ‹æœ¬æ–‡æ¡£çš„æ•…éšœæŽ’é™¤éƒ¨åˆ†
2. æ£€æŸ¥ Docker å’Œ Docker Compose ç‰ˆæœ¬
3. æŸ¥çœ‹å®¹å™¨æ—¥å¿—èŽ·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯
4. ç¡®ä¿ç³»ç»Ÿèµ„æºå……è¶³ï¼ˆå†…å­˜ > 2GBï¼‰ 