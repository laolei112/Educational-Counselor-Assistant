# 教学语言弹窗定位修复说明

## 问题描述

在 PC 版访问时，点击教学语言的 ℹ️ 图标，弹窗会显示在**整个页面的中间**，而不是在**当前弹窗（SchoolDetailModal）内部**的合适位置。

## 问题原因

### 根本原因
在 `@media (max-width: 768px)` 媒体查询中设置了：

```css
.language-info-popup {
  position: fixed;           /* ❌ 相对于视口（整个页面） */
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}
```

### 触发场景
当浏览器窗口宽度 ≤ 768px 时：
- 🖥️ PC 浏览器窗口未全屏
- 💻 笔记本电脑（13寸 MacBook）
- 📱 平板设备
- 🪟 调整过大小的浏览器窗口

**问题：**PC 用户经常窗口宽度 < 768px，导致弹窗错误地使用 fixed 定位。

## 定位方式对比

### position: absolute（正确，用于 PC）
```
┌─────────────────────────────────────┐
│ SchoolDetailModal                   │
│ ┌─────────────────────────────────┐ │
│ │ 基本信息                        │ │
│ │ ┌──────────┐                   │ │
│ │ │教学语言 ℹ│                   │ │
│ │ │中英并重  │                   │ │
│ │ └──────────┘                   │ │
│ │     ↓ (相对于教学语言字段)      │ │
│ │ ┌──────────────────────┐       │ │
│ │ │ 教学语言分类标准      │       │ │
│ │ │ ┌──────────────────┐ │       │ │
│ │ │ │ 表格内容...      │ │       │ │
│ │ │ └──────────────────┘ │       │ │
│ │ └──────────────────────┘       │ │
│ └─────────────────────────────────┘ │
└─────────────────────────────────────┘
```
✅ 弹窗显示在字段下方，位置合理

### position: fixed（错误，误用在 PC）
```
整个浏览器页面
┌─────────────────────────────────────┐
│                                     │
│  ┌──────────────────────┐          │
│  │ 教学语言分类标准      │          │
│  │ ┌──────────────────┐ │          │
│  │ │ 表格内容...      │ │          │ ← 在页面正中间
│  │ └──────────────────┘ │          │
│  └──────────────────────┘          │
│                                     │
│     SchoolDetailModal               │
│     ┌────────────────┐              │
│     │教学语言 ℹ      │              │
│     └────────────────┘              │
│                                     │
└─────────────────────────────────────┘
```
❌ 弹窗在页面中央，遮挡内容，位置不当

## 解决方案

### 修改前
```css
/* 768px 以下就使用 fixed 定位 */
@media (max-width: 768px) {
  .language-info-popup {
    position: fixed;  /* ❌ 误在 PC 上触发 */
    ...
  }
}
```

### 修改后
```css
/* PC 端 (> 480px): 使用默认的 absolute 定位 */
.language-info-popup {
  position: absolute;  /* 相对于 .teaching-language-wrapper */
  top: 100%;
  left: 0;
  right: 0;
  margin-top: 8px;
}

/* 仅在手机端 (≤ 480px) 使用 fixed 定位 */
@media (max-width: 480px) {
  .language-info-popup {
    position: fixed;   /* ✅ 只在手机上居中 */
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
  }
}
```

## 新的定位策略

### PC 端 / 平板（> 480px）
```css
position: absolute;
top: 100%;              /* 在字段下方 */
left: 0;
right: 0;
margin-top: 8px;        /* 与字段间隔 8px */
```

**效果：**
- ✅ 弹窗显示在"教学语言"字段正下方
- ✅ 宽度与 info-item 相同
- ✅ 不遮挡其他内容
- ✅ 位置直观合理

### 手机端（≤ 480px）
```css
position: fixed;
top: 50%;
left: 50%;
transform: translate(-50%, -50%);
width: 90%;
max-width: 400px;
```

**效果：**
- ✅ 弹窗在屏幕中央
- ✅ 易于阅读
- ✅ 适合小屏幕

## 断点分布

| 屏幕宽度 | 定位方式 | 设备类型 |
|---------|---------|---------|
| **> 480px** | `absolute` ✅ | PC、笔记本、平板 |
| **≤ 480px** | `fixed` | 手机 |

## 效果对比

### PC端（> 480px）- 修改后
```
教学语言 ℹ️
中英文并重
    ↓ (点击图标)
┌────────────────────┐
│ 教学语言分类标准    │
│ ┌────────────────┐ │
│ │ 分类  占比  说明│ │
│ │ ...           │ │
│ └────────────────┘ │
└────────────────────┘
```
✅ 显示在字段下方

### 平板（481-768px）- 修改后
```
教学语言 ℹ️
中英文并重
    ↓
┌────────────────────┐
│ 教学语言分类标准    │
└────────────────────┘
```
✅ 显示在字段下方

### 手机（≤ 480px）
```
屏幕中央
    ┌────────────────┐
    │ 教学语言分类... │
    │ ┌────────────┐ │
    │ │ 表格       │ │
    │ └────────────┘ │
    └────────────────┘
```
✅ 居中显示，易于阅读

## 定位层级关系

### HTML 结构
```html
<div class="info-item">
  <label>教学语言 ℹ️</label>
  <div class="teaching-language-wrapper">  ← position: relative（隐式）
    <span>中英文并重</span>
  </div>
  <div class="language-info-popup">        ← position: absolute
    <!-- 弹窗内容 -->
  </div>
</div>
```

### CSS 定位关系
```
.info-item (默认 static)
  └─ .language-info-popup (position: absolute)
      ↑
      相对于最近的非 static 祖先定位
      如果没有，相对于 .info-item
```

## 为什么这样设计？

### PC / 平板（absolute）
- ✅ 弹窗出现在上下文附近
- ✅ 用户知道是哪个字段的说明
- ✅ 不会遮挡太多内容
- ✅ 关闭方便（点击外部）

### 手机（fixed）
- ✅ 屏幕小，需要居中显示
- ✅ 避免被截断
- ✅ 易于阅读
- ✅ 突出显示

## 测试验证

### PC 端测试
1. 浏览器窗口宽度 > 480px
2. 点击教学语言的 ℹ️ 图标
3. **预期**：弹窗显示在字段下方 ✅

### 平板测试
1. iPad / 平板浏览器
2. 点击 ℹ️ 图标
3. **预期**：弹窗显示在字段下方 ✅

### 手机测试
1. iPhone / Android 手机
2. 点击 ℹ️ 图标
3. **预期**：弹窗在屏幕中央 ✅

## 相关修改

**修改的文件：**
- `frontend/src/components/SchoolDetailModal.vue`

**修改内容：**
1. 将 `language-info-popup` 的 fixed 定位从 768px 移至 480px 断点
2. PC 和平板使用默认的 absolute 定位
3. 只在手机上使用 fixed 定位

## 总结

此次修复解决了 PC 端弹窗定位错误的问题：

- ✅ **PC 端**（> 480px）：弹窗显示在字段下方（absolute 定位）
- ✅ **平板**（481-768px）：弹窗显示在字段下方（absolute 定位）
- ✅ **手机**（≤ 480px）：弹窗居中显示（fixed 定位）

现在 PC 端的弹窗会正确地显示在教学语言字段下方，而不是整个页面的中间！

